[workspace]
name = "zarrnii"
channels = ["conda-forge"]
platforms = ["linux-64"]

[dependencies]
python = "3.11.*"
zarr = ">=3.0.8"
nibabel = ">=5.2.0"
dask = ">=2025.5.1"
numpy = ">=1.26.4"
scipy = ">=1.12,<1.16"        # ðŸ”¹ changed line
pandas = ">=2.2.0"
scikit-image = "0.24.0.*"
h5py = ">=3.14.0"
pyyaml = ">=6.0"
"ome-zarr" = ">=0.12.0"
pluggy = ">=1.0.0"

monai = "1.3.2.*"
hydra-core = "1.3.2.*"
scikit-learn = "1.5.2.*"
simpleitk = "2.4.0.*"
tqdm = "4.67.0.*"
lightning = "2.4.0.*"

matplotlib = ">=3.7.1"
tensorboard = "2.14.0.*"
huggingface_hub = "0.29.1.*"

tifffile = "*"
gpustat = "*"

[pypi-dependencies]
ngff-zarr = ">=0.13.1"
wandb = "==0.18.7"
pylibtiff = "*"

[feature.dev.dependencies]
pytest = ">=8.2.0"
pytest-cov = ">=6.0.0"
pre-commit = ">=4.0.0"
jupyterlab = ">=4.2.1"
matplotlib = ">=3.9.0"
bokeh = ">=3.4.1"
black = ">=25.1.0"
flake8 = ">=7.3.0"
flake8-docstrings = ">=1.7.0"
flake8-bugbear = ">=24.12.12"
flake8-import-order = ">=0.18.2"
isort = ">=6.0.1"
mkdocs = ">=1.6.1"
mkdocs-material = ">=9.6.19"
mkdocstrings = ">=0.30.0"
mkdocstrings-python = ">=1.18.2"

[feature.n4.pypi-dependencies]
antspyx = ">=0.6.1"

[feature.templateflow.dependencies]
templateflow = ">=0.8.0"

[feature.imaris.dependencies]
h5py = ">=3.14.0"

[feature.cpu.dependencies]
pytorch = "2.5.1.*"

[feature.gpu.system-requirements]
cuda = "12.8"

[feature.gpu.dependencies]
pytorch-gpu = "2.5.1.*"

[environments]

[environments.default]
features = ["dev", "cpu"]

[environments.n4]
features = ["dev", "cpu", "n4"]

[environments.templateflow]
features = ["dev", "cpu", "templateflow"]

[environments.full]
features = ["dev", "cpu", "n4", "templateflow", "imaris"]

[environments.gpu]
features = ["dev", "gpu"]

[tasks]
test = "pytest"
coverage = "pytest --cov=zarrnii"
lint = "flake8 zarrnii tests"
format = "black zarrnii tests"
docs = "mkdocs serve"
print = "echo Hi! "
inference = "python3 /tmp/ZarrNii/ZarrNii/inference.py"
save = "python3 /tmp/ZarrNii/ZarrNii/save.py"

